<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KidsTV Super Pro</title>
    <style>
        :root { --bg: #0a0a0a; --card: #1c1c1c; --accent: #00ff88; --btn-bg: #ff0055; --text: #fff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html { 
            margin: 0; padding: 0; background: var(--bg); color: var(--text); 
            font-family: 'Arial Rounded MT Bold', sans-serif; height: 100vh; overflow-x: hidden;
        }
        
        .app-wrap { display: flex; flex-direction: column; min-height: 100vh; }

        /* –ö–û–ù–¢–ï–ô–ù–ï–† –ü–õ–ï–Ñ–†–ê */
        .video-container { width: 100%; background: #000; position: sticky; top: 0; z-index: 100; flex-shrink: 0; }
        .ratio { position: relative; width: 100%; padding-bottom: 56.25%; overflow: hidden; }
        .ratio iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }

        /* –©–ò–¢ –¢–ê –ö–ê–°–¢–û–ú–ù–Ü –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á */
        .video-shield { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; cursor: pointer; }
        
        #custom-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 15; display: none;
            flex-direction: column; align-items: center; justify-content: center; padding: 20px;
        }
        .overlay-title { font-size: 20px; margin-bottom: 15px; color: var(--accent); text-transform: uppercase; font-weight: bold; }
        .rec-row { display: flex; gap: 10px; width: 100%; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; }
        .rec-row::-webkit-scrollbar { display: none; }
        .rec-card { flex: 0 0 140px; background: #333; border-radius: 10px; overflow: hidden; border: 2px solid var(--accent); }
        .rec-card img { width: 100%; aspect-ratio: 16/9; object-fit: cover; }

        /* –ù–û–í–Ü –ö–ù–û–ü–ö–ò –ö–ï–†–£–í–ê–ù–ù–Ø */
        .custom-controls {
            display: flex; align-items: center; justify-content: space-between;
            padding: 15px; background: #111; border-bottom: 3px solid #222; z-index: 20;
        }
        .ctrl-btn {
            background: #333; border: none; color: white;
            width: 60px; height: 60px; border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 24px; box-shadow: 0 4px #000; transition: 0.1s;
        }
        .ctrl-btn:active { transform: translateY(3px); box-shadow: 0 1px #000; }
        .btn-play { background: var(--btn-bg); width: 80px; box-shadow: 0 4px #80002b; }

        /* –ê–ö–¶–Ü–ô–ù–Ü –ö–ù–û–ü–ö–ò */
        .actions { padding: 10px; display: flex; gap: 10px; }
        .btn-bottom { 
            flex: 1; padding: 18px; border-radius: 15px; border: none; 
            color: white; font-weight: 900; font-size: 16px; cursor: pointer;
            box-shadow: 0 5px #000; text-transform: uppercase;
        }
        .refresh-btn { background: #444; }
        .random-btn { background: #0077ff; }

        /* –°–ü–ò–°–û–ö */
        .side-content { flex: 1; padding: 10px; background: var(--bg); overflow-y: visible; }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .card { background: var(--card); border-radius: 12px; overflow: hidden; border: 1px solid #333; }
        .card img { width: 100%; aspect-ratio: 16/9; object-fit: cover; }
        .card-title { padding: 8px; font-size: 12px; height: 40px; overflow: hidden; line-height: 1.2; }

        @media (min-width: 1024px) {
            .app-wrap { flex-direction: row; }
            .video-container { width: 70%; height: 100vh; position: sticky; top: 0; }
            .ratio { flex: 1; padding-bottom: 0; }
            .side-content { width: 30%; overflow-y: auto; border-left: 2px solid #222; }
            .grid { grid-template-columns: 1fr; }
            .card { display: flex; align-items: center; gap: 10px; padding: 5px; }
            .card img { width: 120px; border-radius: 8px; }
        }
    </style>
</head>
<body>

<div class="app-wrap">
    <div class="video-container">
        <div class="ratio">
            <iframe id="main-player" src="" allow="autoplay; fullscreen"></iframe>
            <div class="video-shield" onclick="togglePlay()"></div>
            
            <div id="custom-overlay">
                <div class="overlay-title">–í–∏–±–∏—Ä–∞–π –º—É–ª—å—Ç–∏–∫:</div>
                <div id="rec-row" class="rec-row"></div>
                <button class="ctrl-btn btn-play" style="margin-top:20px" onclick="togglePlay()">‚ñ∂</button>
            </div>
        </div>
        
        <div class="custom-controls">
            <button class="ctrl-btn" onclick="playPrev()">‚èÆ</button>
            <button class="ctrl-btn btn-play" id="play-pause" onclick="togglePlay()">‚è∏</button>
            <button class="ctrl-btn" onclick="playNext()">‚è≠</button>
        </div>

        <div class="actions">
            <button class="btn-bottom refresh-btn" onclick="loadFeed()">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
            <button class="btn-bottom random-btn" onclick="playRandom()">üöÄ –†–∞–Ω–¥–æ–º</button>
        </div>
    </div>

    <div class="side-content">
        <div id="grid" class="grid"></div>
    </div>
</div>

<script>
    const channels = [
        'UCiDMw6_5dn59S8S-S_Vr23A', 'UC0Vf_i2h75sJM13bD9LixIg', 'UCcrAG9d_PifNP78aaJe5S2A', 
        'UC_8PAD0Qmi6_gpe77S1Atgg', 'UCcartHVtvAUzfajflyeT_Gg', 'UCBw2WWpuadpPQKVKNZilDkg',
        'UCyWkpcB25Hr2oN7uRlsNg5g', 'UCCIqROlnqhmQPjbdv3e8scQ', 'UCifNwVEEXhG26Z__VXrrcwQ'
    ];
    let videoData = [];
    let isPlaying = true;
    let currentIndex = 0;

    async function loadFeed() {
        document.getElementById('grid').innerHTML = '<p style="text-align:center;padding:20px">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>';
        let allVideos = []; 
        for (const id of channels) {
            try {
                const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent('https://www.youtube.com/feeds/videos.xml?channel_id=' + id)}`);
                const data = await res.json();
                if (data.items) {
                    data.items.forEach(item => {
                        const vId = item.link.split('v=')[1];
                        if (vId && !item.title.toLowerCase().includes("shorts")) {
                            allVideos.push({ id: vId, title: item.title, thumb: `https://img.youtube.com/vi/${vId}/mqdefault.jpg` });
                        }
                    });
                }
            } catch (e) {}
        }
        allVideos.sort(() => Math.random() - 0.5);
        videoData = allVideos.slice(0, 30);
        render();
        if (videoData.length > 0) play(0);
    }

    function render() {
        const html = videoData.map((v, i) => `
            <div class="card" onclick="play(${i})">
                <img src="${v.thumb}">
                <div class="card-title">${v.title}</div>
            </div>
        `).join('');
        document.getElementById('grid').innerHTML = html;

        // –†–µ–Ω–¥–µ—Ä —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π –¥–ª—è –æ–≤–µ—Ä–ª–µ—é
        const recHtml = videoData.slice(0, 10).map((v, i) => `
            <div class="rec-card" onclick="play(${i})">
                <img src="${v.thumb}">
            </div>
        `).join('');
        document.getElementById('rec-row').innerHTML = recHtml;
    }

    function play(index) {
        currentIndex = index;
        const id = videoData[index].id;
        document.getElementById('main-player').src = `https://www.youtube-nocookie.com/embed/${id}?autoplay=1&rel=0&controls=0&enablejsapi=1&disablekb=1`;
        isPlaying = true;
        document.getElementById('play-pause').innerText = '‚è∏';
        document.getElementById('custom-overlay').style.display = 'none';
        if (window.innerWidth < 1024) window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function togglePlay() {
        const overlay = document.getElementById('custom-overlay');
        const btn = document.getElementById('play-pause');
        const iframe = document.getElementById('main-player').contentWindow;
        
        if (isPlaying) {
            iframe.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
            overlay.style.display = 'flex';
            btn.innerText = '‚ñ∂';
        } else {
            iframe.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
            overlay.style.display = 'none';
            btn.innerText = '‚è∏';
        }
        isPlaying = !isPlaying;
    }

    function playNext() { play((currentIndex + 1) % videoData.length); }
    function playPrev() { play((currentIndex - 1 + videoData.length) % videoData.length); }
    function playRandom() { play(Math.floor(Math.random() * videoData.length)); }

    loadFeed();
</script>
</body>
</html>
