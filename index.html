<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidsTV - Clean Edition</title>
    <style>
        :root {
            --bg: #0f0f0f;
            --surface: #1e1e1e;
            --accent: #ff0000; /* YouTube Red –¥–ª—è –∑–≤–∏—á–Ω–æ—Å—Ç—ñ */
            --text: #ffffff;
            --text-dim: #aaaaaa;
        }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Roboto', Arial, sans-serif;
            height: 100%;
        }

        /* –ì–æ–ª–æ–≤–Ω–∞ —Å—ñ—Ç–∫–∞ */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* –®–∞–ø–∫–∞ –∑ –∫–Ω–æ–ø–∫–æ—é —Ä–∞–Ω–¥–æ–º—É */
        .header {
            height: 60px;
            background: var(--surface);
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
            border-bottom: 1px solid #333;
            flex-shrink: 0;
        }

        .btn-next {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ */
        .main-content {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            overflow: hidden;
        }

        /* –ó–æ–Ω–∞ –ø–ª–µ—î—Ä–∞ */
        .video-section {
            width: 100%;
            background: #000;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
        }

        .video-container iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border: none;
        }

        /* –°–ø–∏—Å–æ–∫ –≤—ñ–¥–µ–æ */
        .playlist-section {
            flex-grow: 1;
            overflow-y: auto;
            padding: 15px;
            background: var(--bg);
        }

        .video-item {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: background 0.2s;
            border-radius: 8px;
            padding: 5px;
        }

        .video-item:hover { background: var(--surface); }

        .video-item img {
            width: 140px;
            aspect-ratio: 16/9;
            object-fit: cover;
            border-radius: 8px;
        }

        .video-info {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .video-title {
            font-size: 14px;
            font-weight: 500;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–ª—è –ü–ö (—à–∏—Ä–æ–∫–∏–π –µ–∫—Ä–∞–Ω) */
        @media (min-width: 1000px) {
            .main-content {
                flex-direction: row;
            }
            .video-section {
                flex: 1;
                padding: 20px;
                display: flex;
                align-items: flex-start;
            }
            .video-container {
                width: 100%;
                padding-bottom: 56.25%; /* –¢—Ä–∏–º–∞—î–º–æ 16:9 */
            }
            .playlist-section {
                width: 400px;
                flex-shrink: 0;
                border-left: 1px solid #333;
            }
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —Å–∫—Ä–æ–ª–±–∞—Ä—É */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <div style="font-weight: bold; font-size: 1.2rem;">MyKidsTV</div>
        <button class="btn-next" onclick="playRandom()">üöÄ –Ü–ù–®–ï –í–Ü–î–ï–û</button>
    </div>

    <div class="main-content">
        <div class="video-section">
            <div class="video-container">
                <iframe id="player" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            </div>
        </div>

        <div class="playlist-section" id="playlist">
            </div>
    </div>
</div>

<script>
    const API_KEY = 'AIzaSyCnUi9wAbsDwiq0FPYiVKLWIgyKHLDKFig';
    const channelIds = [
        'UCiDMw6_5dn59S8S-S_Vr23A', 
        'UC_qs3c6ehD78pntpUo_T_Gg',
        'UC4S7X8LNoq8m6_Yf_7S6yqA'
    ];
    let videos = [];

    async function loadContent() {
        videos = [];
        for (const id of channelIds) {
            try {
                const res = await fetch(`https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${id}&part=snippet&maxResults=15&type=video&videoEmbeddable=true`);
                const data = await res.json();
                if (data.items) {
                    data.items.forEach(item => {
                        videos.push({
                            id: item.id.videoId,
                            title: item.snippet.title,
                            thumb: item.snippet.thumbnails.medium.url
                        });
                    });
                }
            } catch (e) { console.log("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è", e); }
        }
        
        // –†–∞–Ω–¥–æ–º –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        videos.sort(() => Math.random() - 0.5);
        renderPlaylist();
        if (videos.length > 0) playVideo(videos[0].id);
    }

    function renderPlaylist() {
        const container = document.getElementById('playlist');
        container.innerHTML = videos.map(v => `
            <div class="video-item" onclick="playVideo('${v.id}')">
                <img src="${v.thumb}" alt="thumb">
                <div class="video-info">
                    <div class="video-title">${v.title}</div>
                </div>
            </div>
        `).join('');
    }

    function playVideo(id) {
        document.getElementById('player').src = `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&modestbranding=1`;
        // –ù–∞ –º–æ–±—ñ–ª–∫–∞—Ö —Å–∫—Ä–æ–ª–∏–º–æ –≤–≥–æ—Ä—É –¥–æ –≤—ñ–¥–µ–æ
        if (window.innerWidth < 1000) {
            window.scrollTo({top: 0, behavior: 'smooth'});
        }
    }

    function playRandom() {
        if (videos.length === 0) return;
        const rand = videos[Math.floor(Math.random() * videos.length)];
        playVideo(rand.id);
    }

    loadContent();
</script>

</body>
</html>
